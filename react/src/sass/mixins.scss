@import './fonctions.scss';
@import './variables.scss';
 


// ===== MIXINS DE TEXTE =====



// Transforme une map de textes et génère des media queries
@mixin texte-dynamique($selecteurs) {
    @each $selecteur, $tailles-dynamiques in $selecteurs {
        @each $taille-ecran, $taille-texte in $tailles-dynamiques {
            // Attribuer 
            @if $taille-ecran == null {
                font-size: $taille-texte;
            }
    
            @else {
                @media screen and (min-width: $taille-ecran) {
                    #{$selecteur} {
                        font-size: $taille-texte;
                        margin-block-start: $taille-texte / 2;
                        margin-block-end: $taille-texte / 2;
                    }
                }
            }
        }
    }
}

// Remlpit automatiquement les informations génériques pour tout type de texte
// Fonctionne avec themer()
@mixin texte-general($theme, $element) {
    color: map-deep-get($theme, $element, "couleur");
    font-weight: map-deep-get($theme, $element, "poids");
    font-style: map-deep-get($theme, $element, "style");
}

@mixin desactiver-margin-block() {
    margin-block-start: 0;
    margin-block-end: 0;
}



// ===== MIXINS DE COULEUR =====



// Stylise plusieurs classe/balises prédéterminés d'après une map de thème
@mixin themer($theme) {
    // Styles de texte
    .titre {
        @include texte-general($theme, "titre");
    }

    .sous-titre {
        @include texte-general($theme, "sous-titre");
    }

    .Icone {
        color: map-deep-get($theme, "icone", "couleur");
    }

    p {
        @include texte-general($theme, "texte");
    }

    a {
        @include texte-general($theme, "lien");

        &:hover {
            @include texte-general($theme, "lien-hover");
        }
    }

    // Boites
    background-color: map-deep-get($theme, "fond", "couleur-primaire");
}

/*
    Permet de faire un fondu entre des degrades ou des images
    Demande qu'un élément vide ayant la classe "classe-destination" soit dans le conteneur de base
    et que l'attribut transition change sur le conteneur original, le temps de l'animation
*/
@mixin fondu($duree, $classe-destination) {
    position: relative;
    background-size: 100% 100%;
    background-repeat: no-repeat;

    .#{$classe-destination} {
        content: "";
        position: absolute;
        top:0;
        left:0;
        @include pleine-taille;
        background-size: 100% 100%;
        background-repeat: no-repeat;
        opacity: 0;
        @content;
    }

    &[transition="1"] {
        .#{$classe-destination} {
            animation: fondu-sortant $duree forwards;
        }
    }
}



// ===== MIXINS RANDOMS =====



// Gère l'ouverture de différentes boites d'après des classes
// Insérer dans la boite à ouvrir/fermer
@mixin gerer-ouverture($valeur-quand-ouvert) {
    &.ouvert {
        display: $valeur-quand-ouvert;
    }

    &.ferme {
        display: none;
    }
}

@mixin pleine-taille() {
    width: 100%;
    height: 100%;
}

// Cache la barre de défilement par défaut des browsers
@mixin cacher-barre-defilement() {
    &::-webkit-scrollbar {
        display: none;
    }

    -ms-overflow-style: none;
    scrollbar-width: none;
}

// Crée un flou gaussien pour flouter le fond
@mixin fond-flou() {
    backdrop-filter: blur(4px);
}



// ===== MIXINS DE SECTIONS =====



@mixin bulle() {
    aspect-ratio: 1;
    border-radius: 50% 50% 10px 50%;
    overflow: hidden;
    position: relative;

    img {
        width: 100%;
        height: 100%;
    }

    *:not(img) {
        position: absolute;
        right: 0;
        bottom: 0;

        text-align: right;
        margin-block-start: 0;
        margin-block-end: 0;
    }
}

@mixin carte() {
    border-radius: 20px;

    $padding-v: 5vh;
    $padding-h: 5vw;

    @media screen and (min-width: map-get($largeurs-ecran, tablette)) {
        $padding-h: 2.5vh;
        $padding-v: 2.5vw;
    }

    padding-top: $padding-v;
    padding-bottom: $padding-v;
    padding-left: $padding-h;
    padding-right: $padding-h;
}



// ===== MIXINS DE REQUÊTES MÉDIAS =====



@mixin mobile {
    @media screen and (min-width: map-get($largeurs-ecran, mobile)) {
        @content;
    }
}

@mixin tablette {
    @media screen and (min-width: map-get($largeurs-ecran, tablette)) {
        @content;
    }
}

@mixin ordinateur {
    @media screen and (min-width: map-get($largeurs-ecran, ordinateur)) {
        @content;
    }
}

@mixin ordinateur-large {
    @media screen and (min-width: map-get($largeurs-ecran, ordinateur-large)) {
        @content;
    }
}